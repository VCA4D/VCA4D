import{_ as C,a as X,S as H}from"./Skeleton-6bbd0d83.js";import{o as s,f as v,n as Y,r as T,a as g,t as N,g as V,b as u,w as a,d as P,u as d,R as Z,h as w,i as h,j as F,k as z,c as f,F as x,l as S,m as $,q as m,s as R,p as O,e as E,v as q,x as K,y as ee,z as te}from"./main-ed388a43.js";import{g as L,a as j}from"./router-e013cbe4.js";import{C as k,_ as D,a as B,L as oe,g as se}from"./Card-872d953f.js";import{k as M}from"./floating-vue-ab285fa4.js";const I={__name:"LogoCountryLarge",props:{isoCode:String},setup(e){return(l,c)=>(s(),v("div",{class:Y(`fib fi-${e.isoCode} w-[5rem] h-[3.75rem] rounded bg-cover`)},null,2))}},ne={},re={class:"flex flex-row flex-wrap gap-y-4 gap-x-6"};function le(e,l){return s(),v("ul",re,[T(e.$slots,"default")])}const W=C(ne,[["render",le]]);const ae={class:"section"},ue={__name:"Section",props:{title:String,textColor:String,borderColor:String},setup(e){return(l,c)=>(s(),v("section",ae,[g("h4",{style:V(`color: ${e.textColor};`)},N(e.title),5),g("div",{class:"border-t-[13px] pt-4",style:V(`border-color: ${e.borderColor};`)},[T(l.$slots,"default",{},void 0,!0)],4)]))}},J=C(ue,[["__scopeId","data-v-599e85c8"]]);const ce={class:"bg-[#6C6C6C] text-white w-[1.75rem] h-[1.75rem] text-center rounded-full text-sm leading-[1.75rem] font-semibold number-badge"},ie={__name:"NumberBadge",props:{value:Number},setup(e){return(l,c)=>(s(),v("div",ce,N(e.value),1))}},G=C(ie,[["__scopeId","data-v-fc0c0f1f"]]);const de={class:"p-4 rounded-lg text-white z-50 sub-cards-list"},_e={class:"studies-list"},pe={key:0,class:"text-center w-full"},ge={__name:"SubCardsList",props:{link:{type:Object,required:!1},linkTitle:{type:String,required:!1}},setup(e){return(l,c)=>(s(),v("div",de,[g("div",_e,[T(l.$slots,"default",{},void 0,!0)]),e.link?(s(),v("div",pe,[u(d(Z),{to:e.link,class:"underline"},{default:a(()=>[P(N(e.linkTitle),1)]),_:1},8,["to"])])):w("",!0)]))}},Q=C(ge,[["__scopeId","data-v-5dba88d1"]]),ve={__name:"ByCategory",props:{studies:Array,countries:Array,category:Object},setup(e){const l=e,c=h(null),y=()=>{c.value=null};F(()=>{document.addEventListener("click",y)}),z(()=>{document.removeEventListener("click",y)});const i=()=>[...new Set(l.studies.map(r=>r.product))].map(r=>({product:r,studies:l.studies.filter(o=>o.product===r)}));return(_,r)=>e.studies.length>0?(s(),f(J,{key:0,title:e.category.prettyName,textColor:e.category.textColor,borderColor:e.category.color},{default:a(()=>[u(W,null,{default:a(()=>[(s(!0),v(x,null,S(i(),o=>(s(),v("li",{key:o.product},[o.studies.length===1?(s(),f(k,{key:0,link:d(L)(o.studies[0]),isLocal:o.studies[0].local,title:d($)(o.product).prettyName},{logo:a(()=>[u(D,{productName:o.product},null,8,["productName"])]),footer:a(()=>[u(B,{text:d(m)(o.studies[0].country).prettyName},{logo:a(()=>{var n;return[u(oe,{isoCode:((n=d(m)(o.studies[0].country))==null?void 0:n.iso)||"gr"},null,8,["isoCode"])]}),_:2},1032,["text"])]),_:2},1032,["link","isLocal","title"])):(s(),f(d(M),{key:1,shown:c.value===o.product,triggers:[],overflowPadding:20,placement:"bottom"},{popper:a(()=>[c.value===o.product?(s(),f(Q,{key:0,link:{name:"comparison",query:{studies:d(j)(o.studies.map(n=>n.id))}},linkTitle:`Compare all ${d($)(o.product).prettyName.toLowerCase()} studies`},{default:a(()=>[(s(!0),v(x,null,S(o.studies,n=>{var t;return s(),f(k,{key:n.id,link:d(L)(n),isLocal:n.local,title:(t=d(m)(n.country))==null?void 0:t.prettyName},{logo:a(()=>{var p;return[u(I,{isoCode:((p=d(m)(n.country))==null?void 0:p.iso)||"gr"},null,8,["isoCode"])]}),_:2},1032,["link","isLocal","title"])}),128))]),_:2},1032,["link","linkTitle"])):w("",!0)]),default:a(()=>[u(k,{isLocal:!1,isOpen:c.value===o.product,title:d($)(o.product).prettyName,onClick:R(n=>c.value===o.product?c.value=null:c.value=o.product,["stop"])},{logo:a(()=>[u(D,{productName:o.product},null,8,["productName"])]),footer:a(()=>[u(B,{text:"countries"},{logo:a(()=>[u(G,{value:o.studies.length},null,8,["value"])]),_:2},1024)]),_:2},1032,["isOpen","title","onClick"])]),_:2},1032,["shown"]))]))),128))]),_:1})]),_:1},8,["title","textColor","borderColor"])):w("",!0)}};const fe=e=>(O("data-v-f8f848de"),e=e(),E(),e),ye=fe(()=>g("h3",{class:"section-title"},[P("By "),g("strong",null,"product")],-1)),me={__name:"ByCategories",props:{categories:Array,studies:Array,countries:Array},setup(e){const l=e,c=(i,_)=>{if(_==="unknown"){const o=l.categories.reduce((n,t)=>n.concat(t.commodities),[]);return i.filter(n=>!o.includes(n.product))}const r=l.categories.find(o=>o.id===_).commodities;return i.filter(o=>r.includes(o.product))},y=i=>c(l.studies,i).sort((r,o)=>{const n=r.product.localeCompare(o.product);return n||r.country.localeCompare(o.country)});return(i,_)=>(s(),v("section",null,[ye,(s(!0),v(x,null,S(e.categories,r=>(s(),f(ve,{key:r.id,studies:y(r.id),countries:e.countries,category:r},null,8,["studies","countries","category"]))),128))]))}},Ce=C(me,[["__scopeId","data-v-f8f848de"]]);const he={class:"logo"},ke={__name:"LogoProductSmall",props:{productName:String,alt:{required:!1,type:String}},setup(e){return(l,c)=>(s(),v("div",he,[u(X,{svg:d(se)(e.productName)},null,8,["svg"])]))}},xe=C(ke,[["__scopeId","data-v-f90cfd32"]]),Se={__name:"ByContinent",props:{continent:String,studies:Array,countries:Array},setup(e){const l=e,c={Europe:"#0073CF",Africa:"#5F8A64",America:"#C46D4D","Asia - Pacific":"#F6E065"},y={Europe:"#0073CF",Africa:"#5F8A64",America:"#C46D4D","Asia - Pacific":"#806C00"},i=h(null),_=()=>{i.value=null};F(()=>{document.addEventListener("click",_)}),z(()=>{document.removeEventListener("click",_)});const r=()=>{const o=[...new Set(l.studies.map(n=>n.country))];return o.sort((n,t)=>n.localeCompare(t)),o.map(n=>({country:n,studies:l.studies.filter(t=>t.country===n)}))};return(o,n)=>(s(),f(J,{title:e.continent,textColor:y[e.continent],borderColor:c[e.continent]},{default:a(()=>[u(W,null,{default:a(()=>[(s(!0),v(x,null,S(r(),t=>(s(),v("li",{key:t.country},[t.studies.length===1?(s(),f(k,{key:0,link:d(L)(t.studies[0]),isLocal:t.studies[0].local,title:d(m)(t.country).prettyName},{logo:a(()=>[u(I,{isoCode:d(m)(t.country).iso||"gr"},null,8,["isoCode"])]),footer:a(()=>[u(B,{class:"",text:d($)(t.studies[0].product).prettyName},{logo:a(()=>[u(xe,{productName:t.studies[0].product},null,8,["productName"])]),_:2},1032,["text"])]),_:2},1032,["link","isLocal","title"])):(s(),f(d(M),{key:1,shown:i.value===t.country,triggers:[],overflowPadding:20,placement:"bottom"},{popper:a(()=>[i.value===t.country?(s(),f(Q,{key:0,link:{name:"comparison",query:{studies:d(j)(t.studies.map(p=>p.id))}},linkTitle:`Compare all ${d(m)(t.country).prettyName} studies`},{default:a(()=>[(s(!0),v(x,null,S(t.studies,p=>(s(),f(k,{key:p.id,link:d(L)(p),isLocal:p.local,title:d($)(p.product).prettyName},{logo:a(()=>[u(D,{productName:p.product},null,8,["productName"])]),_:2},1032,["link","isLocal","title"]))),128))]),_:2},1032,["link","linkTitle"])):w("",!0)]),default:a(()=>[u(k,{isLocal:!1,isOpen:i.value===t.country,title:d(m)(t.country).prettyName,onClick:R(p=>i.value===t.country?i.value=null:i.value=t.country,["stop"])},{logo:a(()=>[u(I,{isoCode:d(m)(t.country).iso||"gr"},null,8,["isoCode"])]),footer:a(()=>[u(B,{text:"studies"},{logo:a(()=>[u(G,{value:t.studies.length},null,8,["value"])]),_:2},1024)]),_:2},1032,["isOpen","title","onClick"])]),_:2},1032,["shown"]))]))),128))]),_:1})]),_:1},8,["title","textColor","borderColor"]))}};const be=e=>(O("data-v-1c62e342"),e=e(),E(),e),$e=be(()=>g("h3",{class:"section-title mt-12"},[P("By "),g("strong",null,"country")],-1)),Ne={__name:"ByContinents",props:{categories:Array,studies:Array,countries:Array},setup(e){const l=e,c=q(()=>[...new Set(l.countries.map(i=>i.continent))]),y=i=>{const _=l.countries.filter(r=>r.continent===i).map(r=>r.id);return l.studies.filter(r=>_.includes(r.country))};return(i,_)=>(s(),v("section",null,[$e,(s(!0),v(x,null,S(c.value,r=>(s(),f(Se,{key:r,class:"continent",continent:r,studies:y(r),countries:e.countries},null,8,["continent","studies","countries"]))),128))]))}},we=C(Ne,[["__scopeId","data-v-1c62e342"]]),Le={class:"flex gap-1"},Be=["id","value"],Ae=["for"],A={__name:"FilterInput",props:{label:String,value:Boolean},emits:["toggle"],setup(e,{emit:l}){const c=q(()=>K().uid),y=l;return(i,_)=>(s(),v("div",Le,[g("input",{id:c.value,type:"checkbox",value:e.value,onChange:_[0]||(_[0]=r=>y("toggle"))},null,40,Be),g("label",{for:c.value},N(e.label),9,Ae)]))}};const U=e=>(O("data-v-9eeb96a7"),e=e(),E(),e),De={class:"mx-4 sm:mx-8 md:mx-12 lg:mx-48 xl:mx-60"},Ie=U(()=>g("h1",null,[g("strong",null,"Browse studies")],-1)),Te={class:"filter-section"},Pe=U(()=>g("h3",null,"Filter the studies on this page based on the topics addressed.",-1)),Fe={__name:"BrowseView",setup(e){const l=h([]),c=h([]),y=h([]),i=h([]),_=h({ecoData:!1,acvData:!1,socialData:!1});F(async()=>{const t=ee();c.value=await r(t.studies),l.value=t.countries,y.value=[...new Set(l.value.map(p=>p.continent))],i.value=t.categories});async function r(t){return Promise.all(t.map(te))}const o=q(()=>{return c.value.filter(t);function t(p){for(var b in _.value)if(_.value[b]&&!p[b])return!1;return!0}});function n(t){_.value[t]=!_.value[t]}return(t,p)=>(s(),f(H,null,{default:a(()=>[g("section",De,[g("section",null,[Ie,g("div",Te,[Pe,g("div",null,[u(A,{label:"With economic data",value:_.value.ecoData,onToggle:p[0]||(p[0]=b=>n("ecoData"))},null,8,["value"]),u(A,{label:"With environnemental data",value:_.value.acvData,onToggle:p[1]||(p[1]=b=>n("acvData"))},null,8,["value"]),u(A,{label:"With social profile",value:_.value.socialData,onToggle:p[2]||(p[2]=b=>n("socialData"))},null,8,["value"])]),g("div",null,[g("div",null,"Number of studies: "+N(o.value.length),1)])])]),u(Ce,{categories:i.value,studies:o.value,countries:l.value},null,8,["categories","studies","countries"]),u(we,{studies:o.value,countries:l.value},null,8,["studies","countries"])])]),_:1}))}},Re=C(Fe,[["__scopeId","data-v-9eeb96a7"]]);export{Re as default};
