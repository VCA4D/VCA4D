import{_ as x,a as G,S as Ie}from"./Skeleton-6bbd0d83.js";import{o as d,f as p,a as m,c as M,r as B,b as v,u as S,h as L,ab as Te,i as A,j as ie,y as ke,Z as ue,m as ee,U as ne,q as O,F as C,w as V,p as j,e as Y,v as I,l as E,C as w,t as P,d as te,n as R,ac as Ae,a0 as Ee,X as Pe,Y as Le,H as Ne,Q as Be}from"./main-ed388a43.js";import{s as U,A as ce,i as Oe,u as de,f as Re,a as Ge}from"./misc-6e2e75d0.js";import{g as Me,e as je,a as Ye}from"./router-e013cbe4.js";import{_ as Xe,C as qe,L as Fe,a as He}from"./Card-872d953f.js";import{D as Ue,g as Je,T as We,c as ze,b as Ke}from"./download-c59053cf.js";import{g as Qe,u as T,w as Ze}from"./economics-9d7282b0.js";const _={addEventListeners(e,t,o){for(let n=0,a=t.length;n<a;n++)e.addEventListener(t[n],o,{passive:!1})},removeEventListeners(e,t,o){for(let n=0,a=t.length;n<a;n++)e.removeEventListener(t[n],o,{passive:!1})},emitEvent:function(e,t,o){if(e.componentInstance)e.componentInstance.$emit(t,o);else{let n=new window.CustomEvent(t,{detail:o});e.el.dispatchEvent(n)}}},J=["mousedown","touchstart"],W=["mousemove","touchmove"],z=["mouseup","touchend"],oe=function(e,t,o){let n=e,a=!0,r=window;typeof t.value=="boolean"?a=t.value:typeof t.value=="object"?(typeof t.value.target=="string"?(n=e.querySelector(t.value.target),n||console.error("There is no element with the current target value.")):typeof t.value.target<"u"&&console.error(`The parameter "target" should be either 'undefined' or 'string'.`),typeof t.value.container=="string"?(r=document.querySelector(t.value.container),r||console.error("There is no element with the current container value.")):typeof t.value.container<"u"&&console.error(`The parameter "container" should be be either 'undefined' or 'string'.`),typeof t.value.active=="boolean"?a=t.value.active:typeof t.value.active<"u"&&console.error(`The parameter "active" value should be either 'undefined', 'true' or 'false'.`)):typeof t.value<"u"&&console.error("The passed value should be either 'undefined', 'true' or 'false' or 'object'.");const l=function(i,u){r===window?window.scrollBy(i,u):(r.scrollLeft+=i,r.scrollTop+=u)},s=function(){let i,u,c,g=!1;n.md=function(f){const D=f instanceof window.MouseEvent,y=D?f.pageX:f.touches[0].pageX,b=D?f.pageY:f.touches[0].pageY,$=document.elementFromPoint(y-window.pageXOffset,b-window.pageYOffset),X=t.arg==="nochilddrag",be=t.modifiers.noleft,Se=t.modifiers.noright,he=t.modifiers.nomiddle,we=t.modifiers.noback,xe=t.modifiers.noforward,Ce=t.arg==="firstchilddrag",$e=$===n,Ve=$===n.firstChild,De=X?typeof($==null?void 0:$.dataset.dragscroll)<"u":typeof($==null?void 0:$.dataset.noDragscroll)>"u";if(!(!$e&&(!De||Ce&&!Ve))&&!(f.button===0&&be)){if(f.button===1&&he||f.button===2&&Se||f.button===3&&we||f.button===4&&xe)return;c=1,i=D?f.clientX:f.touches[0].clientX,u=D?f.clientY:f.touches[0].clientY}},n.mu=function(f){c=0,g&&_.emitEvent(o,"dragscrollend"),g=!1},n.mm=function(f){const D=f instanceof window.MouseEvent;let y,b;if(c){f.preventDefault(),g||_.emitEvent(o,"dragscrollstart"),g=!0;const $=n.scrollLeft+n.clientWidth>=n.scrollWidth||n.scrollLeft===0,X=n.scrollTop+n.clientHeight>=n.scrollHeight||n.scrollTop===0;y=-i+(i=D?f.clientX:f.touches[0].clientX),b=-u+(u=D?f.clientY:f.touches[0].clientY),t.modifiers.pass?(n.scrollLeft-=t.modifiers.y?-0:y,n.scrollTop-=t.modifiers.x?-0:b,n===document.body&&(n.scrollLeft-=t.modifiers.y?-0:y,n.scrollTop-=t.modifiers.x?-0:b),($||t.modifiers.y)&&l(-y,0),(X||t.modifiers.x)&&l(0,-b)):(t.modifiers.x&&(b=-0),t.modifiers.y&&(y=-0),n.scrollLeft-=y,n.scrollTop-=b,n===document.body&&(n.scrollLeft-=y,n.scrollTop-=b)),_.emitEvent(o,"dragscrollmove",{deltaX:-y,deltaY:-b})}},_.addEventListeners(n,J,n.md),_.addEventListeners(window,z,n.mu),_.addEventListeners(window,W,n.mm)};a?document.readyState==="complete"?s():window.addEventListener("load",s):(_.removeEventListeners(n,J,n.md),_.removeEventListeners(window,z,n.mu),_.removeEventListeners(window,W,n.mm))},et=e=>{const t=e;_.removeEventListeners(t,J,t.md),_.removeEventListeners(window,z,t.mu),_.removeEventListeners(window,W,t.mm)},me={mounted:(e,t,o)=>oe(e,t,o),updated:(e,t,o)=>{JSON.stringify(t.value)!==JSON.stringify(t.oldValue)&&oe(e,t,o)},unmounted:e=>et(e)};typeof window<"u"&&window.Vue&&(window.VueDragscroll=me);const tt={xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",viewBox:"0 0 32 32"},nt=m("g",{fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"2.5"},[m("path",{d:"M4.2 16h23.6M16 4.2v23.6",class:"st0"})],-1),ot=[nt];function at(e,t){return d(),p("svg",tt,[...ot])}const st={render:at},rt={xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",viewBox:"0 0 32 32"},lt=m("g",{fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"2.5"},[m("path",{d:"m2.2 2.3 27.6 27.5M29.8 2.3 2.2 29.8"})],-1),it=[lt];function ut(e,t){return d(),p("svg",rt,[...it])}const pe={render:ut};const ct={key:0,class:"modal-overlay"},dt={class:"modal"},mt={__name:"Modal",props:{opened:Boolean},emits:["close"],setup(e,{emit:t}){const o=t;return(n,a)=>(d(),M(Te,{to:"body"},[e.opened?(d(),p("div",ct,[m("div",dt,[B(n.$slots,"default",{},void 0,!0),m("a",{class:"exit-button",onClick:a[0]||(a[0]=r=>o("close"))},[v(G,{svg:S(pe)},null,8,["svg"])])])])):L("",!0)]))}},pt=x(mt,[["__scopeId","data-v-3525a7a6"]]);const ft={class:"footer"},vt={__name:"StudiesListTable",props:{selectedStudies:Array},emits:["select-studies"],setup(e,{emit:t}){const o=e,n=A([]),a=A([]);ie(async()=>{a.value=o.selectedStudies,n.value=await u();async function u(){const c=ke().studies;return Promise.all(c.map(({id:g})=>r(g)))}});async function r(u){const c=await ue(u);return{id:c.id,product:ee(ne(c.id).product).prettyName,country:O(ne(c.id).country).prettyName,isEcoAvailable:i(c,"ecoData"),isSocialAvailable:i(c,"socialData"),isAcvAvailable:i(c,"acvData")}}const l=t,s=[{label:"Product",field:"product",sortable:!0},{label:"Country",field:"country",sortable:!0},{label:"Macro economic indicators",field:"isEcoAvailable",sortable:!0},{label:"Social sustainability",field:"isSocialAvailable",sortable:!0},{label:"Environmental analysis",field:"isAcvAvailable",sortable:!0}];function i(u,c){return u[c]?"Available":"-"}return(u,c)=>(d(),p(C,null,[v(Ue,{class:"table",selectable:"",selectedIds:a.value,maxHeight:400,pageSize:50,rows:n.value,columns:s,"onUpdate:selectedIds":c[0]||(c[0]=g=>a.value=g)},null,8,["selectedIds","rows"]),m("div",ft,[m("button",{class:"confirm-button",onClick:c[1]||(c[1]=g=>l("select-studies",a.value))}," Show comparison ")])],64))}},gt=x(vt,[["__scopeId","data-v-4e5f5cbb"]]);const fe=e=>(j("data-v-213c3ad4"),e=e(),Y(),e),_t=fe(()=>m("div",null,"Compare value chains",-1)),yt=fe(()=>m("div",{class:"modal-title"},"Select studies to compare",-1)),bt={__name:"AddStudiesButton",props:{currentStudySelection:Array},emits:["select-studies"],setup(e,{emit:t}){const o=e,n=A(!1),a=t;function r(l){n.value=!1,a("select-studies",l)}return ie(()=>{o.currentStudySelection.length===0&&(n.value=!0)}),(l,s)=>(d(),p("div",null,[m("a",{class:"add-studies-button",onClick:s[0]||(s[0]=i=>n.value=!0)},[v(G,{class:"plus",svg:S(st)},null,8,["svg"]),_t]),v(pt,{opened:n.value,onClose:s[2]||(s[2]=i=>n.value=!1)},{default:V(()=>[yt,v(gt,{selectedStudies:e.currentStudySelection,onSelectStudies:s[1]||(s[1]=i=>r(i))},null,8,["selectedStudies"])]),_:1},8,["opened"])]))}},ve=x(bt,[["__scopeId","data-v-213c3ad4"]]);const St=e=>(j("data-v-e34f490e"),e=e(),Y(),e),ht=St(()=>m("td",null,null,-1)),wt={class:"study-box"},xt={class:"card-box"},Ct=["onClick"],$t={key:0,class:"footer"},Vt={class:"add-studies"},Dt={__name:"ComparisonHeader",props:{studies:Array},emits:["select-studies"],setup(e,{emit:t}){const o=e,n=I(()=>o.studies.map(a)),a=s=>{var c,g,f;const i=((c=O(U(s==null?void 0:s.country)))==null?void 0:c.iso)||"gr",u=(g=s==null?void 0:s.commodity)==null?void 0:g.toLowerCase();return{...s,country_name:(f=O(U(s==null?void 0:s.country)))==null?void 0:f.prettyName,country_iso_code:i,product:ee(u)}},r=t;function l(s){const u=o.studies.map(c=>c.id).filter(c=>c!==s);r("select-studies",u)}return(s,i)=>(d(),p("tr",null,[ht,(d(!0),p(C,null,E(n.value,u=>(d(),p("td",{key:`${u.id}`},[m("div",wt,[m("div",xt,[v(qe,{link:S(Me)(u),isLocal:!1,isOpen:!1,title:u.product.prettyName},{logo:V(()=>[v(Xe,{productName:u.product.id},null,8,["productName"])]),_:2},1032,["link","title"]),m("a",{class:"remove-button",onClick:c=>l(u.id)},[v(G,{svg:S(pe)},null,8,["svg"])],8,Ct)]),u.id?(d(),p("div",$t,[v(He,{text:u.country_name},{logo:V(()=>[v(Fe,{isoCode:u.country_iso_code||"gr"},null,8,["isoCode"])]),_:2},1032,["text"])])):L("",!0)])]))),128)),m("td",Vt,[v(ve,{currentStudySelection:n.value.map(u=>u.id),onSelectStudies:i[0]||(i[0]=u=>r("select-studies",u))},null,8,["currentStudySelection"])])]))}},It=x(Dt,[["__scopeId","data-v-e34f490e"]]),Tt={class:"h-12"},kt=m("td",null,null,-1),At=m("td",null,null,-1),ae={__name:"ComparisonSeparator",props:{studies:Array},setup(e){return(t,o)=>(d(),p("tr",Tt,[kt,(d(!0),p(C,null,E(e.studies,n=>(d(),p("td",{key:`${n.id}`}))),128)),At]))}},Et=[{title:"Value added",subtitle:"Total value added of value chain",getValue:Qe,format:"amount"},{title:"Share of national GDP",subtitle:"Value chain GDP divided by national GDP",getValue:e=>{var t,o;return(o=(t=e.ecoData)==null?void 0:t.macroData)==null?void 0:o.valueAddedShareNationalGdp},format:"percent"},{title:"Share of agricultural GDP",subtitle:"Value chain GDP divided by agricultural GDP",getValue:e=>{var t,o;return(o=(t=e.ecoData)==null?void 0:t.macroData)==null?void 0:o.valueAddedShareAgriculturalGdp},format:"percent"},{title:"Rate of Integration",subtitle:"Below 70%: depends on imports",getValue:e=>{var t,o;return(o=(t=e.ecoData)==null?void 0:t.macroData)==null?void 0:o.rateOfIntegration},format:"percent"},{title:"Jobs",subtitle:"Total waged employement, excluding family work",getValue:Pt,getSubValues:ge,format:"number"},{title:"Annual net operating profit at production stage",subtitle:"Annual net operating profit per stage",getValue:e=>se(e,!1),getSubValues:e=>re(e,!1),format:"amount"},{title:"Annual net operating profit per producer",subtitle:"Average annual net operating profit per actor",getValue:e=>se(e,!0),getSubValues:e=>re(e,!0),format:"amount"},{title:"Gini Index",subtitle:"Ranges from equality (0) to inequality (1)",getValue:e=>{var t,o;return(o=(t=e.ecoData)==null?void 0:t.macroData)==null?void 0:o.giniIndex},format:"number"}];function Pt(e){const t=ge(e);if(!w.isEmpty(t))return w.sumBy(Object.values(t))}function ge(e){var n,a,r;if(!((a=(n=e.metrics.eco)==null?void 0:n.employment)!=null&&a.employmentByStage))return{};const t=(r=e.metrics.eco.employment)==null?void 0:r.employmentByStage;if(!t)return{};const o={};return Object.keys(t).forEach(l=>{t[l].total&&(o[l]=t[l].total)}),o}function se(e,t=!1){var o,n,a;return(o=e.metrics.eco)!=null&&o.netOperatingProfit?(a=(n=e.metrics.eco.netOperatingProfit)==null?void 0:n.Producers)==null?void 0:a[t?"profitPerActor":"totalProfit"]:null}function re(e,t=!1){var a,r;if(!((a=e.metrics.eco)!=null&&a.netOperatingProfit))return{};const o={};return Object.keys((r=e.metrics.eco)==null?void 0:r.netOperatingProfit).filter(l=>l!=="Producers").forEach(l=>{var s,i;o[Lt(l,t)]=(i=(s=e.metrics.eco.netOperatingProfit)==null?void 0:s[l])==null?void 0:i[t?"profitPerActor":"totalProfit"]}),o}function Lt(e,t){return t?`Per ${w.lowerCase(e).replace(/s$/,"")}`:e}const Nt=["Working conditions","Land and water rights","Gender equality","Food and nutrition security","Social capital","Living conditions"],Bt=Nt.map((e,t)=>({title:e,getValue:o=>{var n;return Ot((n=o.socialData)==null?void 0:n[t])},getSubValues:o=>{var n;return Rt((n=o.socialData)==null?void 0:n[t])},format:"social"}));function Ot(e){return e?Je(e):null}function Rt(e){if(!e)return null;const t={};return e.groups.forEach(o=>{const n=o.title.slice(4);t[n]=Math.round(o.averageValue)}),t}const Gt=[{title:"Total impact per year",subtitle:"Value chain total impact (in pt)",getValue:(e,t)=>{const o=N(t);return le(e,o,!0)},getSubValues:(e,t)=>{const o=N(t);return K(e,o,!0)},format:"number"},{title:"Impact per functional unit",subtitle:"Value chain total impact / volume",getValue:(e,t)=>{const o=N(t);return le(e,o,!1)},getSubValues:(e,t)=>{const o=N(t);return K(e,o,!1)},format:"number"},{title:"Total impact per year on Global warming",subtitle:"Value chain total impact in kg eqCO2",getValue:e=>Q("Global warming",e,{singleScore:!1,sumTotalPerYear:!0}),format:"number"},{title:"Impact per functional unit on Global warming",subtitle:"Value chain total impact / volume",getValue:e=>Q("Global warming",e,{singleScore:!1,sumTotalPerYear:!1}),format:"number"}];function Mt(e){return e.reduce((t,o)=>{var n;return t.concat((n=o.acvData)==null?void 0:n.impacts)},[]).filter(t=>!!t).filter(t=>t.unit==="Pt")}function N(e){const t=Mt(e);return ce.filter(o=>t.map(n=>n.name).includes(o.name)).map(o=>o.name)}function le(e,t,o=!1){const n=K(e,t,o);return w.isEmpty(n)?null:w.sumBy(Object.values(n))}function K(e,t,o=!1){const n={};return t.forEach(a=>{const r=Q(a,e,{singleScore:!0,sumTotalPerYear:o});if(!w.isNull(r)){var l=ce.find(s=>s.name==a).label;l?n[l]=r:n[a]=r}}),n}function Q(e,t,{singleScore:o,sumTotalPerYear:n=!1}){if(!t.acvData)return null;let a=0,r=0;return t.acvData.impacts.filter(s=>s.name===e).filter(s=>o?s.unit==="Pt":s.unit!=="Pt").forEach(s=>{const i=w.groupBy(s.values,u=>u.valuechain_name);for(const u in i){const c=w.sumBy(i[u],"value"),g=jt(t.acvData.valuechains,u);r+=g,a+=c*g}}),n?a:a/r}function jt(e,t){const o=e.find(n=>n.name===t);return o==null?void 0:o.volume}const k={economics:Et,social:Bt,environment:Gt};const Yt={class:"comparison-title"},Xt=m("td",null,null,-1),qt={__name:"ComparisonTitle",props:{studies:Array,title:String},setup(e){return(t,o)=>(d(),p("tr",null,[m("td",Yt,[m("div",null,P(e.title),1)]),(d(!0),p(C,null,E(e.studies,n=>(d(),p("td",{key:`${n.id}`}))),128)),Xt]))}};const Ft=e=>(j("data-v-562d5dee"),e=e(),Y(),e),Ht={class:"row-header"},Ut={class:"row-title"},Jt={key:0,class:"expand-arrow"},Wt={key:0,class:"definition"},zt=Ft(()=>m("td",null,null,-1)),Kt={__name:"ComparisonRow",props:{studies:Array,indicator:Object,expandable:Boolean,expanded:Boolean},emits:["toggle-expand"],setup(e,{emit:t}){const o=e,n=t,a=I(()=>o.studies.map(r=>o.indicator.getValue(r,o.studies)));return(r,l)=>(d(),p("tr",{class:R(["row",{expandable:e.expandable}]),onClick:l[0]||(l[0]=s=>n("toggle-expand"))},[m("td",Ht,[m("div",Ut,[te(P(e.indicator.title)+" ",1),e.expandable?(d(),p("span",Jt,P(e.expanded?"▲":"▼"),1)):L("",!0)]),e.indicator.subtitle?(d(),p("div",Wt,P(e.indicator.subtitle),1)):L("",!0)]),(d(!0),p(C,null,E(e.studies,(s,i)=>(d(),p("td",{key:`value_added__${s.id}`},[B(r.$slots,"default",{value:a.value[i],studyData:s},void 0,!0)]))),128)),zt],2))}},Z=x(Kt,[["__scopeId","data-v-562d5dee"]]);function _e(e,t){const o=e.map(n=>t(n,e));return w.union(...o.map(Object.keys))}const Qt={__name:"ComparisonExpandableRow",props:{studies:Array,indicator:Object},setup(e){const t=e,o=A(!1);function n(){o.value=!o.value}const a=I(()=>_e(t.studies,t.indicator.getSubValues)),r=I(()=>a.value.length!==0);return(l,s)=>(d(),p(C,null,[v(Z,{class:R({expanded:o.value,"parent-row":r.value}),studies:e.studies,indicator:e.indicator,expandable:r.value,expanded:o.value,onToggleExpand:s[0]||(s[0]=i=>n())},{default:V(({value:i,studyData:u})=>[B(l.$slots,"default",{value:i,studyData:u},void 0,!0)]),_:3},8,["class","studies","indicator","expandable","expanded"]),(d(!0),p(C,null,E(a.value,(i,u)=>(d(),M(Z,{key:u,studies:e.studies,class:R(["sub-row",{expanded:o.value,"last-sub-row":u===a.value.length-1}]),indicator:{title:i,getValue:(c,g)=>e.indicator.getSubValues(c,g)[i]}},{default:V(({value:c,studyData:g})=>[B(l.$slots,"default",{value:c,studyData:g,isSubRow:!0},void 0,!0)]),_:2},1032,["studies","class","indicator"]))),128))],64))}},Zt=x(Qt,[["__scopeId","data-v-68aff4e0"]]);const en={__name:"ComparisonDefaultCell",props:{value:Number,studyData:Object,valueType:{type:String,validator:e=>["amount","percent","number"].includes(e)},lightVersion:Boolean},setup(e){const t=e,o=I(()=>t.value?"blue":"gray"),n=I(()=>t.valueType!=="amount"?null:Oe(t.studyData.targetCurrency)?"USD":t.studyData.targetCurrency),{prettyAmount:a,convertAmount:r}=de({studyData:t.studyData,currency:n.value}),l=I(()=>{if(!t.value&&typeof t.value!="number")return"-";switch(t.valueType){case"percent":return Ge(t.value);case"number":return Re(t.value);case"amount":return a.value(r.value(t.value));default:throw new Error("Unrecognized valueType")}});return(s,i)=>(d(),p("div",{class:R(["default-comparison-cell",[o.value,{light:e.lightVersion}]])},P(l.value),3))}},tn=x(en,[["__scopeId","data-v-9292cbd9"]]);const nn={class:"tag-container mx-auto my-2"},on={__name:"ComparisonSection",props:{studies:Array,indicators:Array,title:String},setup(e){function t(o){return o.getSubValues?Zt:Z}return(o,n)=>(d(),p(C,null,[v(qt,{title:e.title,studies:e.studies},null,8,["title","studies"]),(d(!0),p(C,null,E(e.indicators,(a,r)=>(d(),M(Ee(t(a)),{key:r,studies:e.studies,indicator:a},Ae({_:2},[a.format==="social"?{name:"default",fn:V(({value:l,isSubRow:s})=>[m("div",nn,[v(We,{class:"tag",lightVersion:s,scale:l},null,8,["lightVersion","scale"])])]),key:"0"}:{name:"default",fn:V(({value:l,studyData:s,isSubRow:i})=>[v(tn,{value:l,studyData:s,lightVersion:i,valueType:a.format},null,8,["value","studyData","lightVersion","valueType"])]),key:"1"}]),1032,["studies","indicator"]))),128))],64))}},q=x(on,[["__scopeId","data-v-2c6165c2"]]);function an(e){const t=[...cn(e),F("Macro-economic indicators"),...H(e,k.economics),F("Social Sustainability"),...H(e,k.social),F("Environmental Indicators"),...H(e,k.environment)],o=sn(t);o["!cols"]=[{wch:40},...e.map(()=>({wch:20}))];const n=T.book_new();T.book_append_sheet(n,o,"Comparison data"),Ze(n,"Studies Comparison.xlsx",{compression:!0})}function sn(e){const t=T.aoa_to_sheet([]);return e.forEach((o,n)=>rn(t,o,n)),t}function rn(e,t,o){const n=t.map(r=>r.value);T.sheet_add_aoa(e,[n],{origin:T.encode_cell({c:0,r:o})});const a=un(e,o);t.forEach((r,l)=>{a[l]&&(a[l].z=ln(r))})}function ln({type:e="number",value:t}){switch(e){case"string":return"";case"number":return t>100?"#,##0":"0.00";case"social":return"0";case"percent":return"0.00%";case"amount":return'"$"#,##0.00_);\\-"$"#,##0.00';default:return""}}function un(e,t){const{columnIndex:o}=a();return w.range(0,o+1).map(r=>e[T.encode_cell({c:r,r:t})]);function a(){const r=e["!ref"],{e:l}=T.decode_range(r);return{rowIndex:l.r,columnIndex:l.c}}}function cn(e){const t=[h(""),...e.map(n=>{var a;return h(ee((a=n==null?void 0:n.commodity)==null?void 0:a.toLowerCase()).prettyName)})],o=[h(""),...e.map(n=>{var a;return h((a=O(U(n==null?void 0:n.country)))==null?void 0:a.prettyName)})];return[t,o]}function F(e){return[h(e.toUpperCase())]}function H(e,t){const o=[];return t.forEach(n=>o.push(...dn(e,n))),o}function dn(e,t){return[mn(e,t),...pn(e,t)]}function mn(e,t){return[h(t.title),...e.map(o=>ye(t.getValue(o,e),t.format,o))]}function pn(e,t){return t.getSubValues?_e(e,t.getSubValues).map(n=>[h(`---- ${n}`),...e.map(a=>ye(t.getSubValues(a,e)[n],t.format,a))]):[]}function ye(e,t,o){if(t==="amount"){const{convertAmount:n}=de({studyData:o,currency:"USD"});return h(e?n.value(e):null,"amount")}else if(t==="social")return h(ze(e),"social");return h(e,t)}function h(e,t="string"){return{value:e,type:t}}const fn={class:"w-full"},vn={class:"download-logo"},gn={__name:"StudiesComparison",props:{studies:Array},emits:["select-studies"],setup(e,{emit:t}){const o=t;return(n,a)=>(d(),p("table",fn,[m("tbody",null,[v(It,{studies:e.studies,onSelectStudies:a[0]||(a[0]=r=>o("select-studies",r))},null,8,["studies"]),v(q,{studies:e.studies,indicators:S(k).economics,title:"Macro-Economic Indicators"},null,8,["studies","indicators"]),v(ae,{studies:e.studies},null,8,["studies"]),v(q,{studies:e.studies,indicators:S(k).social,title:"Social Sustainability"},null,8,["studies","indicators"]),v(ae,{studies:e.studies},null,8,["studies"]),v(q,{studies:e.studies,indicators:S(k).environment,title:"Environmental Indicators"},null,8,["studies","indicators"]),m("tr",null,[m("td",null,[m("a",{class:"download",onClick:a[1]||(a[1]=()=>S(an)(e.studies))},[m("div",vn,[v(G,{svg:S(Ke)},null,8,["svg"])]),te(" Download comparison data as xlsx")])])])])]))}},_n=x(gn,[["__scopeId","data-v-4a2a1c13"]]);const yn=e=>(j("data-v-06fc246d"),e=e(),Y(),e),bn=yn(()=>m("h1",{class:"mx-4 sm:mx-8 md:mx-12 lg:mx-40 xl:mx-48"},"Compare value chains",-1)),Sn={key:0,class:"py-1 pb-16 px-4 sm:px-8 md:px-12 lg:px-40 xl:px-48 studies-wrapper"},hn={key:1,class:"mx-4 mb-4 sm:mx-8 md:mx-12 lg:mx-40 xl:mx-48 no-study"},wn={__name:"Comparison",setup(e){const t=Pe(),o=Le(),n=A(!1),a=A([]);Ne(t,async()=>{if(!t.query.studies){a.value=[];return}const l=je(t.query.studies);n.value=!0,a.value=await Promise.all(l.map(ue)),n.value=!1},{immediate:!0});function r(l){o.replace({query:{studies:Ye(l)}})}return(l,s)=>(d(),M(Ie,null,{default:V(()=>[m("div",null,[bn,a.value.length>0?Be((d(),p("div",Sn,[v(_n,{studies:a.value,onSelectStudies:s[0]||(s[0]=i=>r(i))},null,8,["studies"])])),[[S(me)]]):n.value===!1?(d(),p("div",hn,[te(" No study is selected "),v(ve,{class:"mt-4",currentStudySelection:a.value.map(i=>i.id),onSelectStudies:s[1]||(s[1]=i=>r(i))},null,8,["currentStudySelection"])])):L("",!0)])]),_:1}))}},kn=x(wn,[["__scopeId","data-v-06fc246d"]]);export{kn as default};
